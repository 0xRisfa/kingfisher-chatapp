# üê¶ Kingfisher Chat App

**Kingfisher Chat App** is a real-time chat application that supports direct messages and group chats. It includes features like user authentication, profile management, file sharing, and WebSocket-based real-time messaging.

---

## üîß Prerequisites

To run this project, ensure you have the following installed on your system:

### Java Development Kit (JDK)
- **Version:** 21 or higher  
- [Download JDK](https://www.oracle.com/java/technologies/javase-downloads.html)

### Apache Maven
- **Version:** 3.6 or higher  
- [Download Maven](https://maven.apache.org/download.cgi)

### MySQL Database
- **Version:** 8.0 or higher  
- [Download MySQL](https://dev.mysql.com/downloads/installer/)

### Keystore for HTTPS
- A `.jks` file for SSL/TLS configuration.

### Node.js *(Optional for Frontend Builds)*
- [Download Node.js](https://nodejs.org/)

---

## üìÅ Project Structure
```
kingfisher-chat-app/
‚îú‚îÄ‚îÄ .vscode/                          # VS Code settings (optional)
‚îú‚îÄ‚îÄ avatars/                          # Directory for user profile pictures
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ main/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ java/                     # Java source files
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ com/example/          # Main application code
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ resources/                # Static files and configuration
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ images/               # Static images
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ config.json           # Frontend configuration file
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ config.properties     # Backend configuration file
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ chat.html             # Chat page
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ register.html         # Registration page
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ index.html            # Login page
‚îÇ   ‚îî‚îÄ‚îÄ test/                         # Test files
‚îú‚îÄ‚îÄ target/                           # Compiled files (generated by Maven)
‚îú‚îÄ‚îÄ uploads/                          # Directory for uploaded files
‚îú‚îÄ‚îÄ .env                              # Environment variables for frontend
‚îú‚îÄ‚îÄ pom.xml                           # Maven configuration file
‚îî‚îÄ‚îÄ README.md                         # Project documentation
```

---

## ‚öôÔ∏è Setup Instructions

### 1. Clone the Repository

```bash
git clone https://github.com/0xRisfa/kingfisher-chatapp.git
cd kingfisher-chatapp
```

### 2. Configure the Backend

#### ‚ûï Add `config.properties`

Create a `config.properties` file inside the `src/main/resources/` directory. This will store backend configuration such as database and keystore details.

```properties
# Database Configuration
db.url=jdbc:mysql://localhost:3306/kingfisher_chat_app
db.user=root
db.password=your_database_password

# Keystore Configuration
keystore.path=keystore.jks
keystore.password=your_keystore_password

# WebSocket and API Endpoints
websocket.url=wss://your-websocket-url
api.base.url=https://your-api-url
```

> üìù Be sure to replace placeholder values with your actual credentials and URLs.

---

### 3. Configure the Frontend

#### ‚ûï Add `config.json`

Create a `config.json` file inside the `src/main/resources/` directory. This is used by the frontend to determine where to send API and WebSocket requests.

```json
{
  "websocketUrl": "wss://your-websocket-url",
  "apiBaseUrl": "https://your-api-url"
}
```

#### ‚ûï (Optional) Add `.env`

If you're using a frontend bundler like Vite or Webpack, you can create a `.env` file in the root of your project:

```env
REACT_APP_API_BASE_URL=https://your-api-url
REACT_APP_WEBSOCKET_URL=wss://your-websocket-url
```

---

### 4. Set Up the Database

#### üß± Create the Database

```sql
CREATE DATABASE kingfisher_chat_app;
```

#### üß© Create the Required Tables

<details> <summary><strong>üìÑ SQL Schema (Click to expand)</strong></summary>
```sql
CREATE TABLE ZAK_USERS (
    ID INT AUTO_INCREMENT PRIMARY KEY,
    USERNAME VARCHAR(255) UNIQUE NOT NULL,
    PASSWORD VARCHAR(255) NOT NULL,
    PROFILE_PICTURE VARCHAR(255) DEFAULT NULL
);

CREATE TABLE ZAK_DIRECT_MESSAGES (
    CHAT_ID INT AUTO_INCREMENT PRIMARY KEY,
    USER1_ID INT NOT NULL,
    USER2_ID INT NOT NULL,
    FOREIGN KEY (USER1_ID) REFERENCES ZAK_USERS(ID),
    FOREIGN KEY (USER2_ID) REFERENCES ZAK_USERS(ID)
);

CREATE TABLE ZAK_GROUPS (
    ID INT AUTO_INCREMENT PRIMARY KEY,
    NAME VARCHAR(255) NOT NULL,
    CREATED_BY INT NOT NULL,
    CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (CREATED_BY) REFERENCES ZAK_USERS(ID) ON DELETE CASCADE
);

CREATE TABLE ZAK_GROUP_MEMBERS (
    GROUP_ID INT NOT NULL,
    USER_ID INT NOT NULL,
    JOINED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY (GROUP_ID, USER_ID),
    FOREIGN KEY (GROUP_ID) REFERENCES ZAK_GROUPS(ID) ON DELETE CASCADE,
    FOREIGN KEY (USER_ID) REFERENCES ZAK_USERS(ID) ON DELETE CASCADE
);

CREATE TABLE ZAK_MESSAGES (
    ID INT AUTO_INCREMENT PRIMARY KEY,
    USER_ID INT NOT NULL,
    MESSAGE TEXT NOT NULL,
    CHAT_ID INT DEFAULT NULL,
    GROUP_ID INT DEFAULT NULL,
    MESSAGE_TYPE VARCHAR(10) DEFAULT 'text',
    TIMESTAMP TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (USER_ID) REFERENCES ZAK_USERS(ID),
    FOREIGN KEY (CHAT_ID) REFERENCES ZAK_DIRECT_MESSAGES(CHAT_ID) ON DELETE CASCADE,
    FOREIGN KEY (GROUP_ID) REFERENCES ZAK_GROUPS(ID) ON DELETE CASCADE
);
</details>
```

---

## üöÄ Running the App

To compile and run the server:

```bash
mvn clean install
mvn exec:java -Dexec.mainClass="com.example.MojServer"
```

Make sure your MySQL server is running and the `config.properties` is properly configured.

---

## ‚ú® Features

- üßë‚Äçüíª Real-time messaging using WebSockets
- üîê Secure login and registration
- üí¨ Direct and group chat support
- üìÅ File and media sharing
- üñºÔ∏è Profile picture support
- üß™ JUnit testable architecture

---

## üõ°Ô∏è Security

- SSL/TLS enabled via `.jks` keystore
- Passwords stored securely (e.g., hashed)
- Input sanitization and user session validation

---

## üì∏ Screenshots

> *(Optional section ‚Äî add screenshots of your UI here)*

---

## üìÑ License

This project is licensed under the MIT License. See the `LICENSE` file for details.
